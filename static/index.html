<!DOCTYPE html>
<html>
    <head>
        <title>Play Othello</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.3.0/knockout-min.js"></script>
        <script src="sammy-0.7.6.min.js"></script>
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet" />
    </head>
    <body>
        
        <div class="container">
            <div class="page-header">
                    <h1>Play othello</h1>
            </div>
            <div class="row">
                <div class="col-sm-4">
                    
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <h3 class="panel-title">New game</h3>
                        </div>
                        <div class="panel-body">
                            <div class="form-group">
                                <label for="boardSizeSelect">Board size</label>
                                <select id="boardSizeSelect" class="form-control" data-bind="options: boardSizeOptions, optionsText: 'text', value: newGameSize"></select>
                            </div>
                            <button class="btn btn-primary" data-bind="click: newGame">Start</button>
                        </div>
                    </div>
                    <!-- ko if: boardLoaded -->
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <h3 class="panel-title">Score</h3>
                        </div>
                        <div class="panel-body">
                            <p>Current player: <strong data-bind="text: data().game_complete ? 'Game complete' : (data().current_turn=='X' ? 'Black' : 'White') "></strong></p>
                            <p>Black: <span data-bind="text: blackScore"></span></p>
                            <p>White: <span data-bind="text: whiteScore"></span></p>
                        </div>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: msgText() != '' -->
                    <div data-bind="attr: {class: msgClass}" role="alert"><span data-bind="text: msgText"></span></div>
                    <!-- /ko -->
                </div>
                <div class="col-sm-8">
                    <svg data-bind="attr: {width: pieceSize()*$root.data().board.length+10, height: pieceSize()*$root.data().board.length+10}">
                        <!-- ko foreach: { data: $root.data().board, as: 'rows' } -->
                            <!-- ko foreach:{ data: rows, as: 'piece_type' } -->
                                <rect data-bind="attr: {x: $parentContext.$index()*$root.pieceSize()+5, y: $index()*$root.pieceSize()+5,
                                                width: $root.pieceSize, height: $root.pieceSize}"
                                        style="fill:rgb(0,100,00);stroke-width:5;stroke:rgb(0,60,0)" />
                                <circle stroke-width="0" data-bind="click: function(data, event) {$root.clickPiece($parentContext.$index(), $index())}, 
                                        attr: {r: $root.pieceSize()*0.4, cx: $parentContext.$index()*$root.pieceSize()+($root.pieceSize())/2 +5,
                                        cy: $index()*$root.pieceSize()+($root.pieceSize())/2+5,
                                        fill: $root.getPieceColour(piece_type)}" />            
                            <!-- /ko -->
                        <!-- /ko -->
                    </svg>
                </div>
                
            </div>
        </div>
        <script src="othello.js"></script>
    </body>
</html>